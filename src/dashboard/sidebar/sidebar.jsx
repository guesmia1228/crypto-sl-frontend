import styles from "./sidebar.module.css";

import Logo from "../../assets/logo/logo.svg";
import { useEffect, useState } from "react";
import { Link, useLocation } from "react-router-dom";

import Hamburger from "../../assets/icon/hamburger.svg";
import Button from "../../components/button/button";
import { dashboardLink, getRole } from "../../utils";
import { ROLE_TO_NAME } from "../../constants";

const items = [
  {
    text: "Dashboard",
    icon: (
      <svg
        width="16"
        height="16"
        viewBox="0 0 16 16"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path d="M5.11111 8.88889C5.64154 8.88889 6.15025 9.0996 6.52532 9.47468C6.9004 9.84975 7.11111 10.3585 7.11111 10.8889V14C7.11111 14.5304 6.9004 15.0391 6.52532 15.4142C6.15025 15.7893 5.64154 16 5.11111 16H2C1.46957 16 0.960859 15.7893 0.585786 15.4142C0.210714 15.0391 0 14.5304 0 14V10.8889C0 10.3585 0.210714 9.84975 0.585786 9.47468C0.960859 9.0996 1.46957 8.88889 2 8.88889H5.11111ZM14 8.88889C14.5304 8.88889 15.0391 9.0996 15.4142 9.47468C15.7893 9.84975 16 10.3585 16 10.8889V14C16 14.5304 15.7893 15.0391 15.4142 15.4142C15.0391 15.7893 14.5304 16 14 16H10.8889C10.3585 16 9.84975 15.7893 9.47468 15.4142C9.0996 15.0391 8.88889 14.5304 8.88889 14V10.8889C8.88889 10.3585 9.0996 9.84975 9.47468 9.47468C9.84975 9.0996 10.3585 8.88889 10.8889 8.88889H14ZM5.11111 0C5.64154 0 6.15025 0.210714 6.52532 0.585786C6.9004 0.960859 7.11111 1.46957 7.11111 2V5.11111C7.11111 5.64154 6.9004 6.15025 6.52532 6.52532C6.15025 6.9004 5.64154 7.11111 5.11111 7.11111H2C1.46957 7.11111 0.960859 6.9004 0.585786 6.52532C0.210714 6.15025 0 5.64154 0 5.11111V2C0 1.46957 0.210714 0.960859 0.585786 0.585786C0.960859 0.210714 1.46957 0 2 0H5.11111ZM14 0C14.5304 0 15.0391 0.210714 15.4142 0.585786C15.7893 0.960859 16 1.46957 16 2V5.11111C16 5.64154 15.7893 6.15025 15.4142 6.52532C15.0391 6.9004 14.5304 7.11111 14 7.11111H10.8889C10.3585 7.11111 9.84975 6.9004 9.47468 6.52532C9.0996 6.15025 8.88889 5.64154 8.88889 5.11111V2C8.88889 1.46957 9.0996 0.960859 9.47468 0.585786C9.84975 0.210714 10.3585 0 10.8889 0H14Z" />
      </svg>
    ),
    link: "/dashboard/vendor",
  },
  {
    text: "Products",
    icon: (
      <svg
        width="16"
        height="16"
        viewBox="0 0 16 16"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path d="M0 0.685762C0 0.503887 0.0722497 0.32946 0.200855 0.200855C0.32946 0.0722497 0.503887 0 0.685762 0H1.19597C2.0646 0 2.58578 0.584269 2.88294 1.12739C3.08136 1.48948 3.22491 1.90916 3.33738 2.28953C3.3678 2.28713 3.3983 2.28591 3.42881 2.28587H14.8564C15.6153 2.28587 16.1639 3.01187 15.9554 3.74243L14.284 9.6025C14.1341 10.1281 13.8171 10.5906 13.3809 10.9199C12.9446 11.2492 12.413 11.4274 11.8664 11.4275H6.42788C5.87698 11.4276 5.34131 11.2467 4.90322 10.9126C4.46513 10.5786 4.14886 10.11 4.00302 9.57873L3.30812 7.04415L2.15604 3.15999L2.15512 3.15268C2.01248 2.63424 1.87899 2.14872 1.67966 1.78664C1.48856 1.43461 1.33495 1.37152 1.19688 1.37152H0.685762C0.503887 1.37152 0.32946 1.29927 0.200855 1.17067C0.0722497 1.04206 0 0.867638 0 0.685762ZM5.94327 16.0011C6.42827 16.0011 6.89341 15.8085 7.23636 15.4655C7.57931 15.1226 7.77197 14.6574 7.77197 14.1724C7.77197 13.6874 7.57931 13.2223 7.23636 12.8793C6.89341 12.5364 6.42827 12.3437 5.94327 12.3437C5.45827 12.3437 4.99313 12.5364 4.65019 12.8793C4.30724 13.2223 4.11457 13.6874 4.11457 14.1724C4.11457 14.6574 4.30724 15.1226 4.65019 15.4655C4.99313 15.8085 5.45827 16.0011 5.94327 16.0011ZM12.3437 16.0011C12.8287 16.0011 13.2939 15.8085 13.6368 15.4655C13.9798 15.1226 14.1724 14.6574 14.1724 14.1724C14.1724 13.6874 13.9798 13.2223 13.6368 12.8793C13.2939 12.5364 12.8287 12.3437 12.3437 12.3437C11.8587 12.3437 11.3936 12.5364 11.0506 12.8793C10.7077 13.2223 10.515 13.6874 10.515 14.1724C10.515 14.6574 10.7077 15.1226 11.0506 15.4655C11.3936 15.8085 11.8587 16.0011 12.3437 16.0011Z" />
      </svg>
    ),
    link: "/dashboard/product",
  },
  {
    text: "Custom payment",
    icon: (
		<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none">
			<path d="M20 22H4a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1ZM8 9v2h8V9H8Zm0 4v2h8v-2H8Z"/>
		</svg>
    ),
    link: "/dashboard/payment",
  },
  {
    text: "Transactions",
    icon: (
      <svg
        width="16"
        height="14"
        viewBox="0 0 16 14"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path d="M12.0004 7.79986C12.4422 7.79986 12.8003 8.158 12.8003 8.59978C12.8003 9.01001 12.4915 9.34811 12.0937 9.39432L12.0004 9.3997H2.73333L5.36675 12.0338C5.65511 12.3221 5.67729 12.7759 5.4333 13.0897L5.36675 13.165C5.07839 13.4534 4.62465 13.4756 4.31085 13.2316L4.23549 13.165L0.235895 9.16541C-0.246117 8.6834 0.0594637 7.87411 0.710628 7.80465L0.801524 7.79986H12.0004ZM11.6891 0.768333L11.7645 0.834877L15.7641 4.83448C16.2461 5.31649 15.9405 6.12578 15.2894 6.19524L15.1985 6.20002H3.9996C3.55782 6.20002 3.19968 5.84189 3.19968 5.4001C3.19968 4.98988 3.50848 4.65177 3.90631 4.60557L3.9996 4.60018H13.2667L10.6332 1.96613C10.3449 1.67778 10.3227 1.22404 10.5667 0.910235L10.6332 0.834877C10.9216 0.546519 11.3753 0.524337 11.6891 0.768333Z" />
      </svg>
    ),
    link: "/dashboard/transactions",
  },
  {
    text: "Wallet",
    icon: (
		<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none">
			<path d="M20 7V5c0-1.103-.897-2-2-2H5C3.346 3 2 4.346 2 6v12c0 2.201 1.794 3 3 3h15c1.103 0 2-.897 2-2V9c0-1.103-.897-2-2-2zm-2 9h-2v-4h2v4zM5 7a1.001 1.001 0 0 1 0-2h13v2H5z"/>
		</svg>
    ),
    link: "/dashboard/wallet",
  },/*
  {
    text: "Notification",
    icon: (
      <svg
        width="16"
        height="16"
        viewBox="0 0 16 16"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path d="M7.77923 0C6.79735 0 6.00142 0.795955 6.00142 1.77782V2.0813C3.92992 2.81347 2.44579 4.78905 2.44579 7.11127V11.5558H1.55688C1.06595 11.5558 0.667969 11.9538 0.667969 12.4447C0.667969 12.9357 1.06595 13.3336 1.55688 13.3336H14.0016C14.4925 13.3336 14.8905 12.9357 14.8905 12.4447C14.8905 11.9538 14.4925 11.5558 14.0016 11.5558H13.1127V7.11127C13.1127 4.78905 11.6286 2.81347 9.55705 2.0813V1.77782C9.55705 0.795955 8.76112 0 7.77923 0Z" />
        <path d="M7.77391 15.9995C6.79202 15.9995 5.99609 15.2036 5.99609 14.2217H9.55173C9.55173 15.2036 8.7558 15.9995 7.77391 15.9995Z" />
      </svg>
    ),
    link: "/dashboard/notification",
  },
  {
    text: "Support",
    icon: (
      <svg
        width="16"
        height="16"
        viewBox="0 0 16 16"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path d="M8 0C6.41775 0 4.87103 0.469192 3.55544 1.34824C2.23985 2.22729 1.21447 3.47672 0.608967 4.93853C0.00346625 6.40034 -0.15496 8.00887 0.153721 9.56072C0.462403 11.1126 1.22433 12.538 2.34315 13.6569C3.46197 14.7757 4.88743 15.5376 6.43928 15.8463C7.99113 16.155 9.59966 15.9965 11.0615 15.391C12.5233 14.7855 13.7727 13.7602 14.6518 12.4446C15.5308 11.129 16 9.58225 16 8C16 5.87827 15.1571 3.84344 13.6569 2.34315C12.1566 0.842855 10.1217 0 8 0ZM7.89 12.925C7.72683 12.925 7.56733 12.8766 7.43166 12.786C7.29599 12.6953 7.19024 12.5665 7.1278 12.4157C7.06536 12.265 7.04902 12.0991 7.08085 11.939C7.11269 11.779 7.19126 11.632 7.30664 11.5166C7.42202 11.4013 7.56902 11.3227 7.72905 11.2908C7.88909 11.259 8.05497 11.2754 8.20572 11.3378C8.35647 11.4002 8.48531 11.506 8.57596 11.6417C8.66662 11.7773 8.715 11.9368 8.715 12.1C8.715 12.3188 8.62808 12.5286 8.47336 12.6834C8.31865 12.8381 8.10881 12.925 7.89 12.925ZM8.575 8.895V9.755C8.57395 9.9299 8.50604 10.0978 8.38518 10.2242C8.26433 10.3506 8.09968 10.4261 7.925 10.435H7.87C7.78159 10.4383 7.6934 10.4241 7.61051 10.3932C7.52762 10.3623 7.45168 10.3152 7.38706 10.2548C7.32245 10.1944 7.27044 10.1218 7.23404 10.0411C7.19765 9.96048 7.17758 9.87343 7.175 9.785C7.175 9.565 7.175 8.405 7.175 8.405C7.16676 8.32484 7.17489 8.24384 7.19889 8.16691C7.22289 8.08999 7.26227 8.01874 7.31464 7.95749C7.367 7.89624 7.43126 7.84627 7.50352 7.8106C7.57578 7.77493 7.65453 7.75432 7.735 7.75C8.52 7.69 9.825 7.4 9.825 6.125C9.825 5.21 9.12 4.59 8.11 4.59C7.72712 4.59632 7.35015 4.68539 7.00493 4.85109C6.65971 5.0168 6.35442 5.25522 6.11 5.55C6.01756 5.64822 5.898 5.71674 5.76652 5.74683C5.63503 5.77692 5.49757 5.76723 5.37161 5.71899C5.24565 5.67075 5.13688 5.58614 5.05914 5.47592C4.98139 5.36569 4.93818 5.23484 4.935 5.1C4.93795 4.91151 5.01522 4.7318 5.15 4.6C5.52132 4.17012 5.98238 3.8269 6.50071 3.59451C7.01904 3.36213 7.58203 3.24624 8.15 3.255C10 3.255 11.29 4.405 11.29 6.055C11.29 7.58 10.305 8.6 8.575 8.895Z" />
      </svg>
    ),
    link: "/dashboard/support",
  },*/
  {
    text: "Settings",
    icon: (
      <svg
        width="16"
        height="16"
        viewBox="0 0 16 16"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M7.5 0C6.94773 0 6.5 0.447716 6.5 1L6.37991 1.84034C6.27244 2.59275 5.39804 2.95494 4.79 2.49892L4.11092 1.98959C3.72039 1.59907 3.08723 1.59907 2.6967 1.98959L1.98959 2.6967C1.59907 3.08723 1.59907 3.72039 1.98959 4.11092L2.49891 4.79C2.95494 5.39804 2.59275 6.27244 1.84033 6.37991L1 6.5C0.447716 6.5 0 6.94773 0 7.5V8.5C0 9.05227 0.447716 9.5 1 9.5L1.84034 9.62009C2.59276 9.72756 2.95495 10.602 2.49892 11.21L1.98959 11.8891C1.59907 12.2796 1.59907 12.9128 1.98959 13.3033L2.6967 14.0104C3.08723 14.401 3.72039 14.401 4.11092 14.0104L4.79 13.5011C5.39804 13.0451 6.27244 13.4073 6.37991 14.1596L6.5 15C6.5 15.5523 6.94773 16 7.5 16H8.5C9.05227 16 9.5 15.5523 9.5 15L9.62009 14.1596C9.72756 13.4073 10.602 13.0451 11.21 13.5011L11.8891 14.0104C12.2796 14.401 12.9128 14.401 13.3033 14.0104L14.0104 13.3033C14.4009 12.9128 14.4009 12.2796 14.0104 11.8891L13.5011 11.21C13.0451 10.602 13.4073 9.72756 14.1596 9.62009L15 9.5C15.5523 9.5 16 9.05227 16 8.5V7.5C16 6.94773 15.5523 6.5 15 6.5L14.1596 6.37991C13.4073 6.27244 13.0451 5.39804 13.5011 4.79L14.0104 4.11092C14.4009 3.72039 14.4009 3.08723 14.0104 2.6967L13.3033 1.98959C12.9128 1.59907 12.2796 1.59907 11.8891 1.98959L11.21 2.49892C10.602 2.95494 9.72756 2.59275 9.62009 1.84034L9.5 1C9.5 0.447716 9.05227 0 8.5 0H7.5ZM8 10C9.10453 10 10 9.10453 10 8C10 6.89547 9.10453 6 8 6C6.89547 6 6 6.89547 6 8C6 9.10453 6.89547 10 8 10Z"
        />
      </svg>
    ),
    link: "/dashboard/vendor/settings",
  },
];

const Sidebar = () => {
  const [active, setActive] = useState();
  const [open, setOpen] = useState(window.innerWidth < 900 ? false : true);

  const query = useLocation();
  const role = getRole(localStorage);
  const roleName = ROLE_TO_NAME[role];

  useEffect(() => {
    if (query.pathname === "/dashboard/settings") {
      setActive(6);
    } else setActive(0);
  }, []);

  useEffect(() => {
    const resize = () => {
      if (window.innerWidth < 900) {
        setOpen(false);
      } else {
        setOpen(true);
      }
    };

    window.addEventListener("resize", resize);

    return () => {
      window.removeEventListener("resize", resize);
    };
  }, []);

  const handleClick = (index) => {
    setActive(index);

    if (window.innerWidth < 900) {
      setOpen(false);
    }
  };

  return (
    <>
      <img
        className={styles.hamburger}
        src={Hamburger}
        alt="hamburger"
        onClick={() => setOpen(true)}
      />
      <div
        className={`card ${styles.sidebarWrapper}`}
        style={{ transform: !open ? "translateX(-100%)" : "translateX(0%)" }}
      >
        <div className={`${styles.sidebar}`}>
          <div>
            <div className={styles.logo}>
              <img src={Logo} alt="nefentus logo" />

              <p className={styles.close} onClick={() => setOpen(false)}>
                X
              </p>
            </div>
            <div className={styles.items}>
              {items.map((item, index) => (
                <Link
				  key={index}
                  to={item.link}
                  className={`${styles.item} ${
                    active === index ? styles.active : ""
                  }`}
                  onClick={() => handleClick(index)}
                  style={{
                    background:
                      active === index
                        ? "linear-gradient(90deg, #1595C2 0%, #66BFDE 100%)"
                        : "transparent",
                  }}
                >
                  {item.icon}
                  <p>{item.text}</p>
                </Link>
              ))}
            </div>
          </div>

		  {(role === "admin" || role === "leader" || role === "seniorbroker" || role === "broker") && (
			<div>
				<Button link={dashboardLink(localStorage)} color={"white"} style={{padding: "0.3rem 0.5rem"}}>
					To {roleName} Dashboard
				</Button>
			</div>
		  )}
        </div>
      </div>
    </>
  );
};

export default Sidebar;
